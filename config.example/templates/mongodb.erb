#
# <%= @hostname %> - <%= @desc %>
# generated by g2n
#

define host {
    host_name               <%= @hostname %>
    address                 <%= @ipaddr %>
    alias                   <%= @desc %>
    use                     template_linux_generic,template_db_mongo
}

# cpu
define service {
    host_name               <%= @hostname %>
    service_description     cpu
    use                     nrpe_check_cpu
}

# memory
define service {
    host_name               <%= @hostname %>
    service_description     memory
    use                     nrpe_check_memory
}

# disk_space
define service {
    host_name               <%= @hostname %>
    service_description     disk_space
    use                     nrpe_check_disk
}

# mongodb_connections
define service {
    host_name               <%= @hostname %>
    service_description     mongodb_connections
    use                     nrpe_check_mongodb_connections
}

<% unless @hostname.include? "db-arbiter" %>
# mongodb_replication
define service {
    host_name               <%= @hostname %>
    service_description     mongodb_replication
    use                     nrpe_check_mongodb_replication
}

# mongodb_replset_state
define service {
    host_name               <%= @hostname %>
    service_description     mongodb_replset_state
    use                     nrpe_check_mongodb_replset_state
}
<% end %>